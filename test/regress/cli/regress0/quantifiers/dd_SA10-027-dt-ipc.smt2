; EXPECT: unsat
(set-logic ALL)
(declare-sort i 0)
(declare-sort us 0)
(declare-datatypes ((u 0)) (((us (e Bool) (re Int) (c us)))))
(declare-fun t (u) u)
(declare-sort false 0)
(declare-fun us (false u u) Bool)
(declare-fun r (u) false)
(declare-datatypes ((s_ 0)) (((s_ (re i) (c u)))))
(declare-datatypes ((s 0)) (((us (s s_)))))
(declare-fun us (us) s)
(declare-fun us (s) us)
(assert (forall ((x s)) (= x (us (us x)))))
(assert (exists ((a u) (x_ s_)) (exists ((x s_)) (and (= (e a) (us (r (us false 0 (us (us x)))) a (t a))) (forall ((t u)) (! (distinct (e t) (e (c (s (us (c t)))))) :pattern ((r t)))) (= (us x) (us (c (us false 0 (us (us (s_ (re (s (us (c a)))) (us (e (c (s (us (c (us false 0 (us (us x_)))))))) (re (c (s (us (c a))))) (us (us x_))))))))))))))
(check-sat)
